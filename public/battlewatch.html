<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArtBattle - Live 1v1 Art Streaming</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #2D3748;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #4A5568;
            border-radius: 3px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #718096;
        }
        .gradient-bg {
            background: linear-gradient(45deg, #FF416C, #FF4B2B);
        }
        .video-wrapper {
            position: relative;
            border: 2px solid #FF416C;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(255, 65, 108, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .video-wrapper:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 30px rgba(255, 65, 108, 0.5);
        }
        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: opacity 0.3s;
            opacity: 0;
        }
        .video-wrapper:hover .video-controls {
            opacity: 1;
        }
        .video-controls button {
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            transition: color 0.3s;
        }
        .video-controls button:hover {
            color: #FF416C;
        }
        .vs-divider {
            position: relative;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #FF416C, #FF4B2B);
        }
        .vs-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #1A202C;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: #FF416C;
            text-transform: uppercase;
            letter-spacing: 2px;
            animation: pulse 2s infinite;
        }
        .bet-button {
            background: linear-gradient(45deg, #FF416C, #FF4B2B);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .bet-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 65, 108, 0.5);
        }
        .vote-button {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .vote-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
        }
    </style>
</head>

<body class="bg-gray-900 text-white">
    <div class="flex flex-col h-screen">
        <!-- Header -->
        <header class="gradient-bg p-4 shadow-lg">
            <div class="container mx-auto flex justify-between items-center">
                <div class="flex items-center">
                    <img src="/api/placeholder/40/40" alt="Logo" class="w-10 h-10 mr-2 rounded-full">
                    <h1 class="text-2xl font-bold text-white">ArtBattle</h1>
                </div>
                <nav>
                    <ul class="flex space-x-6">
                        <li><a href="#" class="hover:text-yellow-300 transition duration-300">Live Battles</a></li>
                        <li><a href="#" class="hover:text-yellow-300 transition duration-300">Leaderboard</a></li>
                        <li><a href="#" class="hover:text-yellow-300 transition duration-300">My Bets</a></li>
                    </ul>
                </nav>
            </div>
        </header>

        <!-- Main Content -->
        <div class="flex-grow flex overflow-hidden">
            <!-- Left Column: Video Player and Info -->
            <div class="w-3/4 flex flex-col overflow-y-auto custom-scrollbar">
                <!-- Battle Mode Toggle -->
                <div class="p-4 bg-gray-800">
                    <div class="flex justify-center space-x-4">
                        <button id="sideBySideBtn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                            Side by Side
                        </button>
                        <button id="pipBtn" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-full transition duration-300">
                            Picture in Picture
                        </button>
                    </div>
                </div>

                <!-- Video Container -->
                <div id="videoContainer" class="flex-grow p-4 bg-gray-800">
                    <!-- Videos will be dynamically inserted here -->
                </div>

                <!-- Battle Info -->
                <div class="bg-gray-800 p-6 mt-4 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4 text-center text-purple-400">Epic Art Showdown</h2>
                    <div class="flex justify-between items-center">
                        <div class="text-center">
                            <img src="https://i.pravatar.cc/100?img=3" alt="Artist 1" class="w-20 h-20 rounded-full mx-auto mb-2 border-4 border-purple-500">
                            <h3 class="font-bold text-lg">CanvasRebel</h3>
                            <p class="text-sm text-gray-400">Digital Painter</p>
                        </div>
                        <div class="text-4xl font-bold text-red-500">VS</div>
                        <div class="text-center">
                            <img src="https://i.pravatar.cc/100?img=4" alt="Artist 2" class="w-20 h-20 rounded-full mx-auto mb-2 border-4 border-purple-500">
                            <h3 class="font-bold text-lg">BrushMaster</h3>
                            <p class="text-sm text-gray-400">Illustrator</p>
                        </div>
                    </div>
                </div>

                <!-- Voting and Betting Section -->
                <div class="bg-gray-800 p-6 mt-4 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold mb-6 text-center text-purple-400">Cast Your Vote & Place Your Bet</h3>
                    <div class="flex justify-between items-center">
                        <div class="text-center">
                            <button class="vote-button bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full mb-2">
                                Vote for CanvasRebel
                            </button>
                            <button class="bet-button text-white font-bold py-2 px-6 rounded-full">
                                Bet on CanvasRebel
                            </button>
                        </div>
                        <div class="text-center">
                            <button class="vote-button bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-full mb-2">
                                Vote for BrushMaster
                            </button>
                            <button class="bet-button text-white font-bold py-2 px-6 rounded-full">
                                Bet on BrushMaster
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Battle Stats -->
                <div class="bg-gray-800 p-6 mt-4 rounded-lg shadow-md">
                    <h3 class="text-2xl font-bold mb-6 text-center text-purple-400">Battle Stats</h3>
                    <div class="flex justify-between items-center">
                        <div class="text-center">
                            <p class="text-2xl font-bold">1,234</p>
                            <p class="text-sm text-gray-400">Votes for CanvasRebel</p>
                        </div>
                        <div class="text-center">
                            <p class="text-2xl font-bold">5,678</p>
                            <p class="text-sm text-gray-400">Total Bets Placed</p>
                        </div>
                        <div class="text-center">
                            <p class="text-2xl font-bold">987</p>
                            <p class="text-sm text-gray-400">Votes for BrushMaster</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Chat -->
            <div class="w-1/4 bg-gray-800 flex flex-col border-l border-gray-700">
                <div class="p-4 bg-gray-700 font-bold text-lg">
                    <i class="fas fa-comments mr-2"></i> Battle Chat
                </div>
                <div id="chatMessages" class="flex-grow overflow-y-auto p-4 custom-scrollbar">
                    <!-- Chat messages will be inserted here -->
                </div>
                <div class="p-4 border-t border-gray-700">
                    <input type="text" id="chatInput" placeholder="Send a message" class="w-full p-3 rounded-full bg-gray-700 text-white focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
            </div>
        </div>
    </div>

    <script>
        const videoContainer = document.getElementById('videoContainer');
        const sideBySideBtn = document.getElementById('sideBySideBtn');
        const pipBtn = document.getElementById('pipBtn');

        // Sample video data
        const sampleStreams = [
            {
                url: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8',
                title: 'CanvasRebel\'s Stream',
            },
            {
                url: 'https://test-streams.mux.dev/test_001/stream.m3u8',
                title: 'BrushMaster\'s Stream',
            },
        ];

        function createVideoWrapper(url, title) {
            const wrapper = document.createElement('div');
            wrapper.className = 'video-wrapper';

            const video = document.createElement('video');
            video.controls = false;

            const titleElement = document.createElement('div');
            titleElement.className = 'absolute top-0 left-0 bg-black bg-opacity-50 text-white p-2 rounded-br';
            titleElement.textContent = title;

            const controls = document.createElement('div');
            controls.className = 'video-controls';

            const playPauseBtn = document.createElement('button');
            playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
            playPauseBtn.onclick = (e) => {
                e.stopPropagation();
                togglePlayPause(video, playPauseBtn);
            };

            controls.appendChild(playPauseBtn);

            wrapper.appendChild(video);
            wrapper.appendChild(titleElement);
            wrapper.appendChild(controls);

            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(video);
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
            }

            return wrapper;
        }

        function togglePlayPause(video, btn) {
            if (video.paused) {
                video.play();
                btn.innerHTML = '<i class="fas fa-pause"></i>';
            } else {
                video.pause();
                btn.innerHTML = '<i class="fas fa-play"></i>';
            }
        }

        function setupSideBySide() {
            videoContainer.innerHTML = '';
            videoContainer.className = 'flex-grow p-4 bg-gray-800 flex flex-col';

            const videoWrapper = document.createElement('div');
            videoWrapper.className = 'flex-grow flex items-stretch space-x-4';

            sampleStreams.forEach((stream, index) => {
                const wrapper = createVideoWrapper(stream.url, stream.title);
                wrapper.style.flex = '1';
                videoWrapper.appendChild(wrapper);

                if (index === 0 && sampleStreams.length > 1) {
                    const divider = document.createElement('div');
                    divider.className = 'vs-divider';
                    const vsText = document.createElement('span');
                    vsText.className = 'vs-text';
                    vsText.textContent = 'VS';
                    divider.appendChild(vsText);
                    videoWrapper.appendChild(divider);
                }
            });

            videoContainer.appendChild(videoWrapper);
        }

        function setupPictureInPicture() {
            videoContainer.innerHTML = '';
            videoContainer.className = 'flex-grow p-4 bg-gray-800 relative';

            const mainWrapper = createVideoWrapper(sampleStreams[0].url, sampleStreams[0].title);
            mainWrapper.style.width = '100%';
            mainWrapper.style.height = '100%';

            const pipWrapper = createVideoWrapper(sampleStreams[1].url, sampleStreams[1].title);
            pipWrapper.style.position = 'absolute';
            pipWrapper.style.width = '30%';
            pipWrapper.style.height = '30%';
            pipWrapper.style.bottom = '20px';
            pipWrapper.style.right = '20px';
            pipWrapper.style.zIndex = '10';

            videoContainer.appendChild(mainWrapper);
            videoContainer.appendChild(pipWrapper);

            // Add swap button
            const swapButton = document.createElement('button');
            swapButton.innerHTML = '<i class="fas fa-exchange-alt"></i>';
            swapButton.className = 'absolute top-4 right-4 bg-gray-800 text-white p-2 rounded-full z-20';
            swapButton.onclick = () => {
                const temp = mainWrapper.querySelector('video').src;
                mainWrapper.querySelector('video').src = pipWrapper.querySelector('video').src;
                pipWrapper.querySelector('video').src = temp;

                const tempTitle = mainWrapper.querySelector('div').textContent;
                mainWrapper.querySelector('div').textContent = pipWrapper.querySelector('div').textContent;
                pipWrapper.querySelector('div').textContent = tempTitle;
            };
            videoContainer.appendChild(swapButton);
        }

        // Set up event listeners for mode buttons
        sideBySideBtn.addEventListener('click', () => {
            sideBySideBtn.classList.add('bg-purple-600');
            pipBtn.classList.remove('bg-purple-600');
            setupSideBySide();
        });

        pipBtn.addEventListener('click', () => {
            pipBtn.classList.add('bg-purple-600');
            sideBySideBtn.classList.remove('bg-purple-600');
            setupPictureInPicture();
        });

        // Initialize with side-by-side view
        setupSideBySide();

        // Chat functionality
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');

        function addChatMessage(user, message) {
            const messageElement = document.createElement('div');
            messageElement.className = 'mb-3 p-2 bg-gray-700 rounded-lg';
            messageElement.innerHTML = `<span class="font-bold text-purple-400">${user}:</span> ${message}`;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        chatInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                const message = this.value.trim();
                if (message) {
                    addChatMessage('You', message);
                    this.value = '';
                }
            }
        });

        // Simulated chat messages
        const simulatedUsers = ['ArtFan123', 'CreativeSoul', 'BrushEnthusiast', 'ColorMaster'];
        const simulatedMessages = [
            'This battle is intense!',
            'CanvasRebel is killing it!',
            'BrushMaster\'s technique is insane',
            'Who do you think will win?',
            'The colors are so vibrant!',
            'I can\'t believe how fast they work',
            'This is the best art battle I\'ve seen',
            'Both artists are so talented'
        ];

        function simulateChat() {
            const user = simulatedUsers[Math.floor(Math.random() * simulatedUsers.length)];
            const message = simulatedMessages[Math.floor(Math.random() * simulatedMessages.length)];
            addChatMessage(user, message);
        }

        // Simulate a new chat message every 5 seconds
        setInterval(simulateChat, 5000);

        // Voting and Betting functionality
        const voteButtons = document.querySelectorAll('.vote-button');
        const betButtons = document.querySelectorAll('.bet-button');

        voteButtons.forEach(button => {
            button.addEventListener('click', function() {
                voteButtons.forEach(btn => btn.disabled = true);
                this.classList.add('bg-purple-600');
                this.textContent = 'Voted!';
                alert('Thank you for voting!');
            });
        });

        betButtons.forEach(button => {
            button.addEventListener('click', function() {
                const amount = prompt('Enter your bet amount:');
                if (amount && !isNaN(amount)) {
                    alert(`You've placed a bet of $${amount}. Good luck!`);
                    this.textContent = `Bet: $${amount}`;
                    this.disabled = true;
                }
            });
        });
    </script>
</body>

</html>